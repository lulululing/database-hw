# 数据库逻辑设计文档

## 数据库模式概览

### 关系模式

- **Model**(Model, Series, Model_label)
- **Country**(Country, Market)
- **Sales_Price**(id, Model, Country, h_Time, Currency, Sales, Price, Exchange_time)
- **Exchange**(Exchange_time, Exchange_rate)
- **Costs**(Costs_id, Model, Country, Costs_time, Costs)
- **Ratio_Expenses1**(Series, Software_product_amortization_rate_acc_cost, RandD_rate_acc_cost)
- **Ratio_Expenses2**(Ratio_expenses2_id, Country, Functional_cost_allocation_rate_acc_cost, Business_group_headquarters_allocation_rate_acc_cost, Marketing_activities_provision_rate_acc_revenue)
- **Ratio_Expenses3**(Ratio_expenses3_id, Model_label, Country, After_sales_provision_rate_acc_cost)
- **Regional_Expenses**(Country, Expenses_time, Marketing_expenses, Labor_cost, Other_variable_expenses, Other_fixed_expenses)
- **History**(h_Time, Country, Model, Sales, Revenues, Gross_profits, Margin_profits, Net_income)
- **Budget**(h_Time, Country, Model, Sales, Revenues, Gross_profits, Margin_profits, Net_income)

---

## 表结构详细说明

### 1. Model (产品型号表)

| 属性 | 数据类型 | 完整性约束 |
|------|----------|------------|
| Model | VARCHAR(50) | Primary Key |
| Series | VARCHAR(50) | References Ratio_Expenses1(Series) |
| Model_label | VARCHAR(50) | References Ratio_Expenses3(Model_label) |

---

### 2. Country (国家/地区表)

| 属性 | 数据类型 | 完整性约束 |
|------|----------|------------|
| Country | VARCHAR(50) | Primary Key |
| Market | VARCHAR(50) | IN ('Asia', 'Africa', 'South America') |

---

### 3. Sales_Price (销售价格表)

| 属性 | 数据类型 | 完整性约束 |
|------|----------|------------|
| id | INTEGER | Primary Key |
| Model | VARCHAR(50) | References Model(Model) |
| Country | VARCHAR(50) | References Country(Country) |
| h_Time | VARCHAR(50) | IN ('2025-10', '2025-11', '2025-12', '2026-01', '2026-02', '2026-03', '2026-04', '2026-05', '2026-06', '2026-07', '2026-08', '2026-09') |
| Currency | VARCHAR(50) | IN ('CHY', 'USD') |
| Sales | INTEGER | |
| Price | DECIMAL(10,2) | |
| Exchange_time | VARCHAR(50) | References Exchange(Exchange_time); = h_Time |

---

### 4. Exchange (汇率表)

| 属性 | 数据类型 | 完整性约束 |
|------|----------|------------|
| Exchange_time | VARCHAR(50) | Primary Key; IN ('2025-10', '2025-11', '2025-12', '2026-01', '2026-02', '2026-03', '2026-04', '2026-05', '2026-06', '2026-07', '2026-08', '2026-09') |
| Exchange_rate | DECIMAL(3,2) | NOT NULL |

---

### 5. Costs (成本表)

| 属性 | 数据类型 | 完整性约束 |
|------|----------|------------|
| Costs_id | INTEGER | Primary Key |
| Model | VARCHAR(50) | References Model(Model) |
| Country | VARCHAR(50) | References Country(Country) |
| Costs_time | VARCHAR(50) | IN ('2025-10', '2025-11', '2025-12', '2026-01', '2026-02', '2026-03', '2026-04', '2026-05', '2026-06', '2026-07', '2026-08', '2026-09') |
| Costs | DECIMAL(10,2) | |

---

### 6. Ratio_Expenses1 (费用比率表1 - 按系列)

| 属性 | 数据类型 | 完整性约束 |
|------|----------|------------|
| Series | VARCHAR(50) | Primary Key; IN ('Dog', 'Cat', 'Tiger') |
| Software_product_amortization_rate_acc_cost<br>(软件产品计提) | DECIMAL(5,4) | |
| RandD_rate_acc_cost<br>(项目研发计提) | DECIMAL(5,4) | |

---

### 7. Ratio_Expenses2 (费用比率表2 - 按国家)

| 属性 | 数据类型 | 完整性约束 |
|------|----------|------------|
| Ratio_expenses2_id | INTEGER | Primary Key |
| Country | VARCHAR(50) | References Country(Country) |
| Functional_cost_allocation_rate_acc_cost<br>(职能公摊计提) | DECIMAL(5,4) | |
| Business_group_headquarters_allocation_rate_acc_cost<br>(总部费用计提) | DECIMAL(5,4) | |
| Marketing_activities_provision_rate_acc_revenue<br>(市场计提) | DECIMAL(5,4) | |

---

### 8. Ratio_Expenses3 (费用比率表3 - 按型号标签和国家)

| 属性 | 数据类型 | 完整性约束 |
|------|----------|------------|
| Ratio_expenses3_id | INTEGER | Primary Key |
| Model_label | VARCHAR(50) | References Model(Model_label)<br>(非主键引用,需使用触发器) |
| Country | VARCHAR(50) | References Country(Country) |
| After_sales_provision_rate_acc_cost<br>(售后计提) | DECIMAL(5,4) | |

---

### 9. Regional_Expenses (区域费用表)

| 属性 | 数据类型 | 完整性约束 |
|------|----------|------------|
| Country | VARCHAR(50) | References Country(Country) |
| Expenses_time | VARCHAR(50) | IN ('2025-10', '2025-11', '2025-12', '2026-01', '2026-02', '2026-03', '2026-04', '2026-05', '2026-06', '2026-07', '2026-08', '2026-09') |
| Marketing_expenses<br>(市场费用) | DECIMAL(10,2) | |
| Labor_cost<br>(人工成本) | DECIMAL(10,2) | |
| Other_variable_expenses<br>(其他变动费用) | DECIMAL(10,2) | |
| Other_fixed_expenses<br>(其他固定费用) | DECIMAL(10,2) | |

---

### 10. History (历史数据表)

| 属性 | 数据类型 | 完整性约束 |
|------|----------|------------|
| h_Time | VARCHAR(50) | |
| Country | VARCHAR(50) | |
| Model | VARCHAR(50) | |
| Sales | INTEGER | |
| Revenues | DECIMAL(20,2) | |
| Gross_profits | DECIMAL(20,2) | |
| Margin_profits | DECIMAL(20,2) | |
| Net_income | DECIMAL(20,2) | |

---

### 11. Budget (预算表)

| 属性 | 数据类型 | 完整性约束 |
|------|----------|------------|
| h_Time | VARCHAR(50) | |
| Country | VARCHAR(50) | |
| Model | VARCHAR(50) | |
| Sales | INTEGER | |
| Revenues | DECIMAL(20,2) | |
| Gross_profits | DECIMAL(20,2) | |
| Margin_profits | DECIMAL(20,2) | |
| Net_income | DECIMAL(20,2) | |

---

## 说明

- 主键用 **Primary Key** 标注
- 外键关系用 **References** 标注
- 枚举值约束用 **IN** 标注
- 时间范围覆盖: 2025年10月 至 2026年9月
- 货币类型支持: CHY (人民币), USD (美元)
- 产品系列: Dog, Cat, Tiger
- 市场区域: Asia (亚洲), Africa (非洲), South America (南美洲)
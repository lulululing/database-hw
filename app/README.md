# 销售数据分析系统 - 安装和使用指南

## 📋 项目简介

这是一个基于 Python + Streamlit 开发的销售数据分析系统，用于管理和分析企业的销售、预算、成本等关键业务数据。

## 🚀 快速开始

### 1. 环境要求

- Python 3.8 或更高版本
- MySQL 5.7 或更高版本

### 2. 安装依赖

在项目目录下打开终端（PowerShell），执行以下命令：

```powershell
# 安装所需的 Python 包
pip install streamlit
pip install pymysql
pip install pandas
pip install openpyxl
```

### 3. 配置数据库

1. 首先确保 MySQL 数据库已启动
2. 执行 `大作业.sql` 文件，创建数据库和表结构：
   ```powershell
   mysql -u root -p < "大作业.sql"
   ```
3. 编辑 `app/config.py` 文件，修改数据库连接配置：

```python
DB_CONFIG = {
    'host': 'localhost',
    'port': 3306,
    'user': 'root',              # 修改为你的数据库用户名
    'password': 'your_password', # 修改为你的数据库密码
    'database': 'your_database', # 修改为你的数据库名
    'charset': 'utf8mb4'
}
```

### 4. 运行应用

在 `app` 目录下执行：

```powershell
cd app
streamlit run app.py
```

系统会自动在浏览器中打开应用（默认地址: http://localhost:8501）

## 👥 用户角色和权限

系统提供三种用户角色：

| 角色 | 用户名 | 密码 | 权限 |
|------|--------|------|------|
| 👨‍💼 Manager（经理） | Manager | manager123 | 查看、编辑、导出、分析 |
| 📊 Analyst（分析师） | Analyst | analyst123 | 查看、导出、分析 |
| 👤 Operator（操作员） | Operator | operator123 | 仅查看 |

## 📊 功能模块

### 1. 🏠 首页
- 显示系统概述
- 展示关键业务指标
- 销售趋势图表

### 2. 📊 历史数据查询
- 按时间、国家、产品筛选历史销售数据
- 显示销量、收入、毛利、净收入等指标
- 数据可视化展示
- 支持导出 CSV

### 3. 💰 预算数据查询
- 查询预算数据
- 多维度筛选
- 预算统计和可视化

### 4. 💵 销售价格数据
- 查看销售价格信息
- 价格统计分析

### 5. 💸 成本数据
- 查看成本数据
- 按国家和产品分析成本

### 6. 📈 数据分析对比
- **预算 vs 实际对比**: 对比预算和实际完成情况
- **按国家汇总**: 各国销售业绩分析
- **按产品汇总**: 各产品销售表现
- **时间趋势分析**: 销售趋势变化

### 7. 📑 报表生成
- 生成多种类型报表
- 支持 CSV 和 Excel 格式导出
- 自定义筛选条件

### 8. ⚙️ 系统设置
- 查看数据库配置
- 用户角色权限说明

## 📁 项目结构

```
app/
├── app.py                 # 主应用程序
├── config.py              # 配置文件
├── pages/                 # 页面模块
│   ├── __init__.py
│   ├── history.py         # 历史数据页面
│   ├── budget.py          # 预算数据页面
│   ├── sales_price.py     # 销售价格页面
│   ├── costs.py           # 成本数据页面
│   ├── analysis.py        # 数据分析页面
│   └── report.py          # 报表生成页面
└── utils/                 # 工具模块
    ├── __init__.py
    └── database.py        # 数据库操作模块
```

## 🔧 常见问题

### 1. 无法连接数据库
- 检查 MySQL 服务是否启动
- 确认 `config.py` 中的数据库配置是否正确
- 确认数据库用户名和密码是否正确

### 2. 导入错误
确保已安装所有依赖包：
```powershell
pip install streamlit pymysql pandas openpyxl
```

### 3. 页面无法显示
- 清除浏览器缓存
- 重启 Streamlit 应用
- 检查终端错误信息

### 4. 数据为空
- 确认数据库中已有测试数据
- 检查 SQL 文件是否正确执行
- 验证表结构是否完整

## 📝 使用说明

### 数据查询
1. 在左侧菜单选择对应的数据查询页面
2. 设置筛选条件
3. 点击"查询"按钮
4. 查看数据和统计图表

### 数据分析
1. 进入"数据分析对比"页面
2. 选择分析类型
3. 设置筛选条件
4. 查看分析结果和可视化图表

### 报表导出
1. 进入"报表生成"页面
2. 选择报表类型
3. 设置筛选条件
4. 点击"生成报表"
5. 点击"导出"按钮下载文件

## 💡 技术栈

- **后端**: Python 3.x
- **Web框架**: Streamlit
- **数据库**: MySQL
- **数据处理**: Pandas
- **数据库连接**: PyMySQL
- **数据导出**: openpyxl

## 📧 联系方式

如有问题，请联系开发团队。

## 📄 许可证

本项目仅供学习使用。

---

© 2025 销售数据分析系统

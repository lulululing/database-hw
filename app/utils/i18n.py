# å®Œæ•´å®Œå–„åçš„ i18n.py
import streamlit as st

# ================= 1. å…¨å±€å­—å…¸å®šä¹‰ =================
TRANSLATIONS = {
    'zh': {
        # --- å…¨å±€é€šç”¨ ---
        'app_title': 'ç»è¥é¢„æµ‹æ•°æ®åº“ç³»ç»Ÿ',
        'sidebar_lang': 'ğŸŒ è¯­è¨€ / Language',
        'login_warning': 'è¯·å…ˆç™»å½•',
        'no_permission': 'æ‚¨æ²¡æœ‰æƒé™è®¿é—®æ­¤é¡µé¢',
        'success': 'æ“ä½œæˆåŠŸï¼',
        'error': 'å‘ç”Ÿé”™è¯¯ï¼š',
        'save': 'ä¿å­˜',
        'delete': 'åˆ é™¤',
        'confirm': 'ç¡®è®¤',
        'cancel': 'å–æ¶ˆ',
        'currency': 'å¸ç§',
        'unit_yuan': 'Â¥',
        'unit_dollar': '$',
        'user_id': 'å·¥å·/è´¦å·',
        'view_all_option': 'å…¨éƒ¨',
        'btn_go': 'å‰å¾€',
        'pivot_source': 'æ•°æ®æº',
        
        # --- ä¾§è¾¹æ å¯¼èˆª ---
        'nav_dashboard': 'ç”¨æˆ·ä¸­å¿ƒ',
        'nav_entry': 'æ•°æ®å¡«æŠ¥',
        'nav_display': 'ç»¼åˆè§†å›¾',
        'nav_history': 'å†å²æ•°æ®',
        'nav_budget': 'é¢„ç®—æ•°æ®',
        'nav_costs': 'æˆæœ¬æ˜ç»†',
        'nav_price': 'é”€å”®ä»·æ ¼',
        'nav_analysis': 'æŠ¥è¡¨åˆ†æ',
        # 'nav_report': 'æŠ¥è¡¨ç”Ÿæˆ',  # å·²åˆ é™¤é¡µé¢
        'nav_log': 'ç³»ç»Ÿæ—¥å¿—',

        # --- ä»ªè¡¨ç›˜ (Dashboard) ---
        'dashboard_header': 'ç”¨æˆ·ä¸­å¿ƒ',
        'dashboard_tab_profile': 'ä¸ªäººä¸­å¿ƒ',
        'welcome': 'æ¬¢è¿å›æ¥ï¼Œ',
        'role': 'è§’è‰²',
        'permissions': 'æ‚¨çš„æƒé™',
        'logout': 'é€€å‡ºç™»å½•',
        'function_reconmmend': 'åŠŸèƒ½æ¨è',
        'card_entry_title': 'æ•°æ®å¡«æŠ¥',
        'card_entry_desc': 'å½•å…¥æœˆåº¦é”€å”®/æˆæœ¬æ•°æ®',
        'card_analysis_title': 'å¯¹æ¯”åˆ†æ',
        'card_analysis_desc': 'æŸ¥çœ‹é¢„ç®—ä¸å®ç»©å·®å¼‚',
        'card_report_title': 'æŠ¥è¡¨ç”Ÿæˆ',
        'card_report_desc': 'å¯¼å‡ºè‡ªå®šä¹‰æˆ–æœˆåº¦æŠ¥è¡¨',
        'system_status': 'ç³»ç»ŸçŠ¶æ€ç›‘æ§',
        'db_connected': 'æ•°æ®åº“è¿æ¥æ­£å¸¸',
        'metric_country': 'è¦†ç›–å›½å®¶æ•°',
        'metric_model': 'äº§å“å‹å·æ•°',
        'metric_time': 'æ—¶é—´å‘¨æœŸæ•°',
        'dashboard_tab_access': 'åŠŸèƒ½å¯¼èˆª',
        'system_info': 'ç³»ç»Ÿä¿¡æ¯',
        'login_time': 'ç™»å½•æ—¶é—´',
        'permission_count': 'æƒé™æ•°é‡',
        'database_role': 'æ•°æ®åº“è§’è‰²',
        'db_failed': 'æ•°æ®åº“è¿æ¥å¤±è´¥',
        'db_check_failed': 'æ•°æ®åº“æ£€æµ‹å¤±è´¥',
        'start_date': 'å¼€å§‹æ—¥æœŸ',
        'end_date': 'ç»“æŸæ—¥æœŸ',
        'export_format': 'å¯¼å‡ºæ ¼å¼',
        'source_exchange': 'æ±‡ç‡è¡¨',
        'source_expenses': 'åŒºåŸŸè´¹ç”¨è¡¨',
        'batch_download_zip': 'è½½å¯¼å‡ºæ–‡ä»¶',

        # åœ¨ 'zh' å­—å…¸ä¸­æ·»åŠ ï¼š
        'unknown_user': 'æœªçŸ¥ç”¨æˆ·',
        'unknown_role': 'æœªçŸ¥è§’è‰²',
        'no_permissions': 'æš‚æ— æƒé™',
        'current_language': 'å½“å‰è¯­è¨€',
        'batch_export_title': 'æ‰¹é‡æ•°æ®å¯¼å‡º',
        'batch_export_desc': 'ä¸€æ¬¡æ€§å¯¼å‡ºå¤šä¸ªæ•°æ®è¡¨ï¼Œæ”¯æŒExcelå’ŒCSVæ ¼å¼',
        'batch_select_tables': 'é€‰æ‹©è¦å¯¼å‡ºçš„æ•°æ®è¡¨',
        'batch_processing': 'æ­£åœ¨å¤„ç†æ‰¹é‡å¯¼å‡º...',
        'export_error': 'å¯¼å‡ºæ—¶å‘ç”Ÿé”™è¯¯',
        'quick_export_options': 'å¿«é€Ÿå¯¼å‡ºé€‰é¡¹',
        'export_current_month': 'å¯¼å‡ºæœ¬æœˆæ•°æ®',
        'export_last_quarter': 'å¯¼å‡ºä¸Šå­£åº¦æ•°æ®',
        'export_all_data': 'å¯¼å‡ºæ‰€æœ‰æ•°æ®',
        'enable_date_filter': 'å¯ç”¨æ—¶é—´ç­›é€‰',
        'db_size': 'æ•°æ®åº“å¤§å°',
        'db_check_suggestion': 'è¯·æ£€æŸ¥æ•°æ®åº“è¿æ¥é…ç½®',
        'generate_batch_export': 'ç”Ÿæˆæ‰¹é‡å¯¼å‡ºæ–‡ä»¶',
        'no_data_found': 'æœªæ‰¾åˆ°ç¬¦åˆæ¡ä»¶çš„æ•°æ®',
                # --- å¸¸ç”¨ç•Œé¢å…ƒç´  ---
        'filter_title': 'ç­›é€‰æ¡ä»¶',
        'select_time': 'æ—¶é—´å‘¨æœŸ',
        'select_country': 'å›½å®¶',
        'select_model': 'äº§å“å‹å·',
        'select_view': 'é€‰æ‹©è§†å›¾',
        'btn_query': 'æŸ¥è¯¢æ•°æ®',
        'status_querying': 'æŸ¥è¯¢ä¸­...',
        'header_preview': 'æ•°æ®é¢„è§ˆ',
        'header_stats': 'ç»Ÿè®¡æ‘˜è¦',
        'msg_found_records': 'æ‰¾åˆ° {count} æ¡è®°å½•',
        'msg_no_data': 'æœªæ‰¾åˆ°ç¬¦åˆæ¡ä»¶çš„æ•°æ®',
        'msg_current_region': 'å½“å‰åŒºåŸŸ: **{region}** (ä»…é™æŸ¥çœ‹æœ¬å›½æ•°æ®)',
        'msg_view_all_region': 'æ‚¨å¯ä»¥æŸ¥çœ‹æ‰€æœ‰å›½å®¶çš„æ•°æ®',
        'msg_no_views': 'æ‚¨çš„è§’è‰²æ²¡æœ‰å¯ç”¨çš„è§†å›¾',
        'tip_query': 'è¯·é€‰æ‹©è§†å›¾å¹¶ç‚¹å‡»"æŸ¥è¯¢æ•°æ®"æŒ‰é’®',
        'msg_no_time_data': 'æ²¡æœ‰æ‰¾åˆ°æ—¶é—´æ®µæ•°æ®',
        'msg_select_time_period': 'è¯·é€‰æ‹©æ—¶é—´æ®µ',
        'msg_no_data_for_time': 'æ²¡æœ‰æ‰¾åˆ°è¯¥æ—¶é—´æ®µçš„æ•°æ®',
        'msg_time_breakdown_stats': 'å…±æ‰¾åˆ° {records} æ¡æ—¶é—´æ‹†åˆ†è®°å½•ï¼Œè¦†ç›– {countries} ä¸ªå›½å®¶',
        'select_time_periods': 'é€‰æ‹©æ—¶é—´æ®µ',
        'tab_revenue_trends': 'æ”¶å…¥è¶‹åŠ¿',
        'tab_net_income_trends': 'å‡€åˆ©æ¶¦è¶‹åŠ¿',
        'tab_country_heatmap': 'å›½å®¶çƒ­åŠ›å›¾',
        'chart_revenue_trends': 'æ”¶å…¥è¶‹åŠ¿å›¾',
        'chart_net_income_by_time': 'æŒ‰æ—¶é—´æ®µå‡€åˆ©æ¶¦',
        'chart_revenue_heatmap': 'æ”¶å…¥çƒ­åŠ›å›¾',
        'label_time_period': 'æ—¶é—´æ®µ',
        'chart_sales_comparison': 'é”€é‡å¯¹æ¯”å›¾',
        'legend_forecast': 'é¢„æµ‹',
        'legend_budget': 'é¢„ç®—',
        'msg_no_sales_data': 'æš‚æ— é”€å”®æ•°æ®',
        'msg_no_revenue_data': 'æš‚æ— æ”¶å…¥æ•°æ®',
        'msg_no_profit_data': 'æš‚æ— åˆ©æ¶¦æ•°æ®',
        'msg_no_comparison_data': 'æš‚æ— å¯¹æ¯”æ•°æ®',
        'msg_no_country_data': 'æš‚æ— å›½å®¶æ•°æ®',
        'msg_no_product_data': 'æš‚æ— äº§å“æ•°æ®',
        'unit_revenue': 'æ”¶å…¥',
        'unit_profit': 'åˆ©æ¶¦',
        'chart_revenue_by_country': 'æŒ‰å›½å®¶æ”¶å…¥',
        'chart_net_income_by_country': 'æŒ‰å›½å®¶å‡€åˆ©æ¶¦',
        'chart_sales_by_product': 'æŒ‰äº§å“é”€é‡',
        'chart_revenue_distribution': 'æ”¶å…¥åˆ†å¸ƒ',

        # å·®å¼‚åˆ—æ ‡é¢˜
        'col_sales_diff': 'é”€é‡å·®å¼‚',
        'col_revenue_diff': 'æ”¶å…¥å·®å¼‚',
        'col_gross_profit_diff': 'æ¯›åˆ©å·®å¼‚',
        'col_net_profit_diff': 'å‡€åˆ©å·®å¼‚',
        # --- ç»Ÿè®¡æŒ‡æ ‡ ---
        'metric_records': 'è®°å½•æ•°',
        'metric_total_sales': 'æ€»é”€é‡',
        'metric_total_revenue': 'æ€»æ”¶å…¥',
        'metric_total_profit': 'æ€»å‡€åˆ©æ¶¦',
        'metric_avg_cost': 'å¹³å‡æˆæœ¬',
        'metric_cost_range': 'æˆæœ¬èŒƒå›´',
        'metric_avg_price': 'å¹³å‡ä»·æ ¼',
        'metric_main_currency': 'ä¸»è¦å¸ç§',
        # æ“ä½œç±»å‹ç¿»è¯‘
        'log_action_login': 'ç™»å½•',
        'log_action_logout': 'ç™»å‡º',
        'log_action_data_entry': 'æ•°æ®å½•å…¥',
        'log_action_costs_entry': 'æˆæœ¬å½•å…¥',
        'log_action_exchange_entry': 'æ±‡ç‡å½•å…¥',
        'log_action_expenses_entry': 'è´¹ç”¨å½•å…¥',
        'log_action_sales_entry': 'é”€å”®å½•å…¥',
        'log_action_delete': 'åˆ é™¤æ“ä½œ',
        'log_action_export': 'å¯¼å‡ºæ“ä½œ',
        'log_action_update': 'æ›´æ–°æ“ä½œ',
        'log_action_view': 'æŸ¥çœ‹æ“ä½œ',
        'log_action_test': 'æµ‹è¯•æ“ä½œ',

        # åˆ—åç¿»è¯‘
        'log_id': 'æ—¥å¿—ID',
        # --- å¯¼å‡ºæŒ‰é’® ---
        'header_export': 'æ•°æ®å¯¼å‡º',
        'btn_export_csv': 'å¯¼å‡º CSV',
        'btn_export_excel': 'å¯¼å‡º Excel',
        
        # --- è§†å›¾åç§° ---
        'view_display_all': 'ç»¼åˆè§†å›¾ (æ‰€æœ‰å›½å®¶)',
        'view_s_display': 'æ±‡æ€»è§†å›¾ (å†å²+é¢„æµ‹+é¢„ç®—)',
        'view_s_model': 'å‹å·æ±‡æ€»è§†å›¾',
        'view_s_country': 'å›½å®¶æ±‡æ€»è§†å›¾',
        'view_display_india': 'ğŸ‡®ğŸ‡³ ç»¼åˆè§†å›¾ - å°åº¦',
        'view_display_pakistan': 'ğŸ‡µğŸ‡° ç»¼åˆè§†å›¾ - å·´åŸºæ–¯å¦',
        'view_display_kenya': 'ğŸ‡°ğŸ‡ª ç»¼åˆè§†å›¾ - è‚¯å°¼äºš',
        'view_display_sa': 'ğŸ‡¿ğŸ‡¦ ç»¼åˆè§†å›¾ - å—é',
        'view_history': 'å†å²æ•°æ®',
        'view_budget': 'é¢„ç®—æ•°æ®',
        'view_costs': 'æˆæœ¬æ•°æ®',
        'view_price': 'ä»·æ ¼æ•°æ®',

        # --- åˆ†æé¡µ (Analysis) ---
        'analysis_select_dim': 'é€‰æ‹©åˆ†æç»´åº¦',
        'analysis_opt_comparison': 'é¢„ç®— vs é¢„æµ‹å¯¹æ¯”',
        'analysis_opt_time': 'æ—¶é—´å‘¨æœŸè¶‹åŠ¿',
        'analysis_opt_country': 'å›½å®¶ç»´åº¦æ±‡æ€»',
        'analysis_opt_product': 'äº§å“ç»´åº¦æ±‡æ€»',
        'analysis_title_comparison': 'é¢„ç®—ä¸é¢„æµ‹å¯¹æ¯”åˆ†æ',
        'analysis_title_time': 'æ—¶é—´å‘¨æœŸè¶‹åŠ¿åˆ†æ',
        'analysis_title_country': 'åŒºåŸŸæ±‡æ€»åˆ†æ',
        'analysis_title_product': 'äº§å“é”€å”®åˆ†æ',
        'tab_sales': 'é”€é‡',
        'tab_revenue': 'æ”¶å…¥',
        'tab_net_income': 'å‡€åˆ©æ¶¦',
        'db_check_connection': 'è¯·æ£€æŸ¥æ•°æ®åº“è¿æ¥å’Œè¡¨åæ˜¯å¦æ­£ç¡®',
        'download_month_data': 'æœ¬æœˆæ•°æ®_{current_month}.xlsx',
        'download_quarter_data_file': 'ä¸Šå­£åº¦æ•°æ®_{start_date}_è‡³_{end_date}.xlsx',
        'log_export_format': 'æ‰¹é‡å¯¼å‡º {table_count} ä¸ªè¡¨ï¼Œæ ¼å¼: {format}, è®°å½•æ•°: {record_count}',
        'records_chinese': 'æ¡è®°å½•',
        'filename_month_template': 'æœ¬æœˆæ•°æ®_{month}.xlsx', 
        'report_page_title': 'é«˜çº§æ•°æ®å¯¼å‡ºä¸­å¿ƒ',
        'report_page_desc': 'æ”¯æŒè‡ªå®šä¹‰ç­›é€‰ã€æ•°æ®é€è§†è¡¨åŠæœˆåº¦æ•°æ®æ‰¹é‡å½’æ¡£ã€‚',
        'report_tab_custom': 'æ˜ç»†æŠ¥è¡¨',
        'report_tab_pivot': 'æ•°æ®é€è§†è¡¨',
        'report_tab_batch': 'æ‰¹é‡å½’æ¡£',
        'report_cfg_source': '1. æ•°æ®æºè®¾ç½®',
        'report_select_source': 'é€‰æ‹©åŸºç¡€è¡¨',
        'report_cfg_cols': '2. å­—æ®µç­›é€‰',
        'report_sel_cols': 'å‹¾é€‰éœ€è¦çš„åˆ— (é»˜è®¤å…¨é€‰)',
        'report_preview_title': 'æ•°æ®é¢„è§ˆ',
        'report_batch_desc': 'ä¸€é”®ä¸‹è½½ç³»ç»Ÿä¸­çš„æ ¸å¿ƒæ•°æ®è¡¨ï¼ˆç»¼åˆã€å†å²ã€é¢„ç®—ã€æˆæœ¬ï¼‰ï¼Œå¹¶è‡ªåŠ¨æ‰“åŒ…ä¸º ZIP æ–‡ä»¶ã€‚',
        'report_sel_tables': 'é€‰æ‹©è¦æ‰“åŒ…çš„è¡¨',
        'report_btn_batch': 'å¼€å§‹ç”Ÿæˆæ•°æ®åŒ…',
        'report_success_batch': 'æ‰“åŒ…å®Œæˆï¼åŒ…å« {count} ä¸ªæ–‡ä»¶ã€‚',
        'report_btn_dl_batch': 'ä¸‹è½½ ZIP å½’æ¡£åŒ…',
        'pivot_cfg_rows': 'è¡Œ (Rows)',
        'pivot_cfg_cols': 'åˆ— (Columns)',
        'pivot_cfg_vals': 'å€¼ (Values)',
        'pivot_cfg_func': 'èšåˆå‡½æ•°',
        
        # --- ç™»å½•é¡µ ---
        'login_page_title': 'ç»è¥é¢„æµ‹æ•°æ®åº“ç³»ç»Ÿ',
        'subtitle': 'æ•°æ®é©±åŠ¨çš„ä¸šåŠ¡æ™ºèƒ½å¹³å°',
        'login_title': 'ç”¨æˆ·ç™»å½•',
        'username_ph': 'ä¾‹å¦‚ï¼šå¼ ç»ç† æˆ– manager_user',
        'password_ph': 'è¯·è¾“å…¥å¯†ç ',
        'login_btn': 'ç™»å½•',
        'login_success': 'ç™»å½•æˆåŠŸï¼',
        'login_failed': 'è®¤è¯å¤±è´¥ï¼šè´¦å·ä¸å­˜åœ¨æˆ–å¯†ç é”™è¯¯',
        'test_accounts': 'æµ‹è¯•è´¦å·ä¿¡æ¯',
        'test_table': """
| è§’è‰² | è´¦å·(ID) | å§“å | å¯†ç  |
|---|---|---|---|
| **ç»ç†** | `manager_user` | å¼ ç»ç† | `123` |
| **è´¢åŠ¡** | `fbp_user` | æè´¢åŠ¡ | `123` |
| **å°åº¦ä¸šåŠ¡** | `sales_india` | Rahul | `123` |
| **å·´åŸºæ–¯å¦** | `sales_pakistan` | Ahmed | `123` |
| **å—éä¸šåŠ¡** | `sales_south_africa` | Botha | `123` |
| **è‚¯å°¼äºš** | `sales_kenya` | Kipchoge | `123` |
""",

        # --- æƒé™åç§° ---
        'perm_data_entry': 'æ•°æ®å¡«æŠ¥',
        'perm_view_display': 'ç»¼åˆè§†å›¾',
        'perm_analyze': 'å¯¹æ¯”åˆ†æ',
        'perm_export': 'æŠ¥è¡¨å¯¼å‡º',
        'perm_view_history': 'æŸ¥çœ‹å†å²',
        'perm_view_budget': 'æŸ¥çœ‹é¢„ç®—',
        'perm_view_costs': 'æŸ¥çœ‹æˆæœ¬',
        'perm_view_price': 'æŸ¥çœ‹ä»·æ ¼',
        'perm_edit_price': 'ç¼–è¾‘ä»·æ ¼',
        'perm_view_log': 'æŸ¥çœ‹æ—¥å¿—',
        'perm_view_system_log': 'æŸ¥çœ‹ç³»ç»Ÿæ—¥å¿—',
        
        # --- æ•°æ®å¡«æŠ¥é¡µç»†åˆ†æƒé™ ---
        'perm_data_entry_sales': 'å¡«æŠ¥-é”€å”®æ•°æ®',
        'perm_data_entry_costs': 'å¡«æŠ¥-æˆæœ¬æ•°æ®',
        'perm_data_entry_expenses': 'å¡«æŠ¥-è´¹ç”¨æ•°æ®',
        'perm_data_entry_exchange': 'å¡«æŠ¥-æ±‡ç‡æ•°æ®',
        'perm_data_entry_model': 'å¡«æŠ¥-æœºå‹æ•°æ®',
        'perm_data_entry_country': 'å¡«æŠ¥-å›½å®¶æ•°æ®',
        
        # --- ç³»ç»Ÿä¿¡æ¯ (Dashboard) ---
        'sys_status_cpu': 'CPU ä½¿ç”¨ç‡',
        'sys_status_ram': 'å†…å­˜ä½¿ç”¨ç‡',
        'sys_status_disk': 'ç£ç›˜ç©ºé—´',
        'sys_status_uptime': 'è¿è¡Œæ—¶é—´',
        'sys_user_active': 'æ´»è·ƒç”¨æˆ·',
        'sys_last_update': 'æœ€åæ›´æ–°',
        
        # --- å…¶ä»–æƒé™ ---
        'perm_manage_users': 'ç”¨æˆ·ç®¡ç†',
        'perm_view_audit': 'æŸ¥çœ‹å®¡è®¡',
        'perm_edit_settings': 'ç³»ç»Ÿè®¾ç½®',
        
        # --- æ•°æ®å¡«æŠ¥é¡µ (Data Entry) ---
        'entry_page_title': 'æ•°æ®å½•å…¥ç®¡ç†',
        'entry_select_type': 'é€‰æ‹©å½•å…¥ç±»å‹',
        'entry_opt_costs': 'æˆæœ¬æ•°æ® (Costs)',
        'entry_opt_exchange': 'æ±‡ç‡æ•°æ® (Exchange)',
        'entry_opt_expenses': 'è´¹ç”¨æ•°æ® (Expenses)',
        'entry_opt_model': 'æœºå‹æ•°æ® (Model)',
        'entry_opt_country': 'å›½å®¶æ•°æ® (Country)',
        'entry_opt_sales': 'é”€å”®æ•°æ® (Sales & Price)',
        'entry_opt_batch': 'æ‰¹é‡é”€å”® (Batch Sales)',
        'entry_opt_history': 'å†å²æ•°æ® (History)',
        'entry_opt_budget': 'é¢„ç®—æ•°æ® (Budget)',
        'msg_no_entry_opt': 'æ‚¨æ²¡æœ‰å¯ç”¨çš„å½•å…¥é€‰é¡¹',
        'tab_add_update': 'æ–°å¢ / ä¿®æ”¹',
        'tab_delete': 'åˆ é™¤',
        'btn_save': 'ä¿å­˜æäº¤',
        'btn_delete': 'ç¡®è®¤åˆ é™¤',
        'ph_time': 'æ—¶é—´ (YYYY-MM)',
        'ph_sales': 'é”€å”®é‡',
        'ph_price': 'å•ä»·',
        'ph_cost': 'å•ä½æˆæœ¬',
        'ph_model': 'äº§å“å‹å·',
        'ph_country': 'å›½å®¶',
        'label_currency': 'å¸ç§',
        'msg_save_success': 'ä¿å­˜æˆåŠŸï¼',
        'msg_del_success': 'åˆ é™¤æˆåŠŸï¼',
        'perm_view_s_display': 'æŸ¥çœ‹æ±‡æ€»è§†å›¾',
        'perm_view_sales_price': 'æŸ¥çœ‹é”€å”®ä»·æ ¼è§†å›¾',
        'perm_view_user_profile': 'è®¿é—®ä¸ªäººä¸­å¿ƒ',
        'perm_view_system_log': 'æŸ¥çœ‹ç³»ç»Ÿæ—¥å¿—',
        'perm_delete_own_data': 'åˆ é™¤æœ¬äººæ•°æ®',
        'perm_data_entry_currency': 'å¡«æŠ¥-å¸ç§æ•°æ®',
        'perm_view_display_country': 'æŸ¥çœ‹æœ¬å›½ç»¼åˆè§†å›¾',
        'perm_view_sales_country': 'æŸ¥çœ‹æœ¬å›½é”€å”®è§†å›¾',
        'perm_view_history_country': 'æŸ¥çœ‹æœ¬å›½å†å²æ•°æ®',
        'perm_view_budget_country': 'æŸ¥çœ‹æœ¬å›½é¢„ç®—æ•°æ®',
        'perm_view_costs_country': 'æŸ¥çœ‹æœ¬å›½æˆæœ¬æ•°æ®',
        # --- æ‰¹é‡å¯¼å…¥ ---
        'batch_title': 'æ‰¹é‡é”€å”®æ•°æ®å½•å…¥',
        'batch_hint': 'æç¤ºï¼šæ‚¨å¯ä»¥ç›´æ¥ä» Excel å¤åˆ¶å¤šè¡Œæ•°æ®ï¼ˆä¸å«è¡¨å¤´ï¼‰ï¼Œç‚¹å‡»è¡¨æ ¼å·¦ä¸Šè§’å•å…ƒæ ¼åç²˜è´´ (Ctrl+V)ã€‚',
        'batch_btn_save': 'æ‰¹é‡ä¿å­˜',
        'batch_msg_empty': 'è¡¨æ ¼ä¸ºç©º',
        'batch_msg_success': 'æ‰¹é‡å¯¼å…¥å®Œæˆ: {success} æˆåŠŸ, {fail} å¤±è´¥',
        'batch_msg_fail_all': 'æ‰€æœ‰æ•°æ®ä¿å­˜å¤±è´¥ï¼Œè¯·æ£€æŸ¥æ ¼å¼',
        
        # --- æŠ¥è¡¨é¡µæ–°åŠŸèƒ½ (Pivot & Batch) - å·²åˆ é™¤ ---
        'pivot_drag_drop': 'æ‹–æ‹½å­—æ®µç”Ÿæˆé€è§†è¡¨',
        'pivot_download': 'ä¸‹è½½é€è§†è¡¨ (Excel)',
        'batch_processing': 'æ­£åœ¨å¤„ç†...',
        'batch_complete': 'å½’æ¡£å®Œæˆï¼åŒ…å« {count} ä¸ªæ–‡ä»¶ã€‚',
        'batch_download_zip': 'ä¸‹è½½ ZIP å½’æ¡£åŒ…',
        'batch_select_hint': 'è¯·è‡³å°‘é€‰æ‹©ä¸€å¼ è¡¨è¿›è¡Œå½’æ¡£',
        'source_display': 'ç»¼åˆå±•ç¤ºè¡¨',
        'source_history': 'å†å²æ•°æ®è¡¨',
        'source_budget': 'é¢„ç®—æ•°æ®è¡¨',
        'source_costs': 'æˆæœ¬æ˜ç»†è¡¨',
        
        # --- æ—¥å¿—é¡µ ---
        'log_search_placeholder': 'æœç´¢ç”¨æˆ·åã€è§’è‰²ã€æ“ä½œç±»å‹...',
        'log_filter_action': 'ç­›é€‰æ“ä½œç±»å‹',
        'log_refresh': 'åˆ·æ–°æ—¥å¿—',
        'log_total': 'æ€»æ—¥å¿—æ•°',
        'log_active_users': 'æ´»è·ƒç”¨æˆ·æ•°',
        'log_latest': 'æœ€æ–°è®°å½•',
        'log_frequent_action': 'æœ€é¢‘ç¹æ“ä½œ',
        'log_time': 'æ—¶é—´',
        'log_username': 'ç”¨æˆ·å',
        'log_role': 'è§’è‰²',
        'log_action': 'æ“ä½œç±»å‹',
        'log_details': 'è¯¦æƒ…',
        'log_export_csv': 'å¯¼å‡ºæ—¥å¿— (CSV)',
        'log_export_excel': 'å¯¼å‡ºæ—¥å¿— (Excel)',
        'log_analysis': 'æ—¥å¿—ç»Ÿè®¡åˆ†æ',
        'log_dist_action': 'æ“ä½œç±»å‹åˆ†å¸ƒ',
        'log_dist_user': 'ç”¨æˆ·æ´»è·ƒåº¦',
        'convert_currency': 'è´§å¸è½¬æ¢',
        'target_currency': 'ç›®æ ‡è´§å¸',
        'comprehensive_data': 'ç»¼åˆæ•°æ®ç»Ÿè®¡',
        'stat_failed': 'ç»Ÿè®¡è·å–å¤±è´¥',
        'data_tables': 'ä¸ªæ•°æ®è¡¨',
        'records': 'æ¡è®°å½•',
        'preparing_month_data': 'æ­£åœ¨å‡†å¤‡æœ¬æœˆæ•°æ®...',
        'month_data_stats': 'æœ¬æœˆæ•°æ®ç»Ÿè®¡ï¼š',
        'download_month_excel': 'ä¸‹è½½æœ¬æœˆæ•°æ®Excel',
        'no_month_data': 'æœ¬æœˆæš‚æ— æ•°æ®',
        'export_month_failed': 'å¯¼å‡ºæœ¬æœˆæ•°æ®å¤±è´¥',
        'preparing_quarter_data': 'æ­£åœ¨å‡†å¤‡å­£åº¦æ•°æ®...',
        'quarter_data_stats': 'å­£åº¦æ•°æ®ç»Ÿè®¡',
        'download_quarter_data': 'ä¸‹è½½å­£åº¦æ•°æ®',
        'no_quarter_data': 'è¯¥å­£åº¦æš‚æ— æ•°æ®',
        'export_quarter_failed': 'å¯¼å‡ºå­£åº¦æ•°æ®å¤±è´¥',
        'preparing_all_data': 'æ­£åœ¨å‡†å¤‡æ‰€æœ‰æ•°æ®...',
        'all_data_stats': 'æ•°æ®åº“å…¨éƒ¨æ•°æ®ç»Ÿè®¡',
        'all_data_warning': 'æ³¨æ„ï¼šæ•°æ®é‡è¾ƒå¤§ï¼Œå¯¼å‡ºå¯èƒ½éœ€è¦è¾ƒé•¿æ—¶é—´',
        'no_data_in_db': 'æ•°æ®åº“ä¸­æš‚æ— æ•°æ®',
        'get_stats_failed': 'è·å–ç»Ÿè®¡ä¿¡æ¯å¤±è´¥',
        # --- æ–°å¢ç³»ç»Ÿæ—¥å¿—ç¿»è¯‘ ---
        'costs_entry_title': 'æˆæœ¬æ•°æ®å½•å…¥',
        'exchange_entry_title': 'æ±‡ç‡æ•°æ®å½•å…¥', 
        'expenses_entry_title': 'åŒºåŸŸè´¹ç”¨å½•å…¥',
        'model_entry_title': 'æœºå‹æ•°æ®å½•å…¥',
        'country_entry_title': 'å›½å®¶æ•°æ®å½•å…¥',
        'sales_entry_title': 'é”€å”®æ•°æ®å½•å…¥',
        'history_entry_title': 'å†å²æ•°æ®å½•å…¥',
        'budget_entry_title': 'é¢„ç®—æ•°æ®å½•å…¥',

        'delete_title': 'åˆ é™¤æ•°æ®',
        'ph_cost_id': 'æˆæœ¬è®°å½•ID',
        'ph_exchange_rate': 'æ±‡ç‡',
        'exchange_hint': 'å½•å…¥æœˆåº¦æ±‡ç‡ï¼ˆUSDè½¬CNYï¼‰',
        'expenses_hint': 'å½•å…¥åŒºåŸŸå›ºå®šè´¹ç”¨ï¼ˆå•ä½ï¼šå…ƒ/æœˆï¼‰',
        'expenses_detail_title': 'è´¹ç”¨æ˜ç»†',

        'ph_marketing_expenses': 'å¸‚åœºè´¹ç”¨',
        'ph_labor_cost': 'äººå·¥æˆæœ¬',
        'ph_other_variable': 'å…¶ä»–å¯å˜è´¹ç”¨',
        'ph_other_fixed': 'å…¶ä»–å›ºå®šè´¹ç”¨',

        'ph_series': 'äº§å“ç³»åˆ—',
        'ph_model_label': 'äº§å“æ ‡ç­¾',
        'ph_market': 'å¸‚åœºåŒºåŸŸ',
        'current_region': 'å½“å‰åŒºåŸŸ',
        'region_hint': 'ä»…é™å½•å…¥æœ¬åŒºåŸŸæ•°æ®',
        'ph_currency': 'è´§å¸',
        'ph_record_id': 'è®°å½•ID',
        'log_manager_filters': 'ç»ç†ç­›é€‰é€‰é¡¹',
        'log_filter_user': 'æŒ‰ç”¨æˆ·ç­›é€‰',
        'log_filter_role': 'æŒ‰è§’è‰²ç­›é€‰',
        'log_time_range': 'æ—¶é—´èŒƒå›´',
        'log_start_date': 'å¼€å§‹æ—¥æœŸ',
        'log_end_date': 'ç»“æŸæ—¥æœŸ',
        'log_records': 'æ—¥å¿—è®°å½•',
        'log_showing': 'å…±æ˜¾ç¤º',
        'log_of_total': 'æ¡è®°å½•ï¼ˆæ€»è®¡',
        'log_time_trend': 'æ—¥å¿—æ—¶é—´è¶‹åŠ¿',
        'log_export': 'å¯¼å‡ºæ—¥å¿—',
        'log_export_csv_help': 'ä¸‹è½½CSVæ ¼å¼çš„å®Œæ•´æ—¥å¿—æ–‡ä»¶',
        'log_export_excel_help': 'ä¸‹è½½Excelæ ¼å¼çš„å®Œæ•´æ—¥å¿—æ–‡ä»¶',
        'log_all_users': 'æ‰€æœ‰ç”¨æˆ·',
        'log_all_roles': 'æ‰€æœ‰è§’è‰²'
    },
    'en': {
        # --- General ---
        'app_title': 'Business Forecast System',
        'sidebar_lang': 'ğŸŒ Language',
        'login_warning': 'Please login first',
        'no_permission': 'You do not have permission to access this page',
        'success': 'Operation Successful!',
        'error': 'Error occurred: ',
        'save': 'Save',
        'delete': 'Delete',
        'confirm': 'Confirm',
        'cancel': 'Cancel',
        'currency': 'Currency',
        'unit_yuan': 'Â¥',
        'unit_dollar': '$',
        'user_id': 'User ID',
        'view_all_option': 'All',
        'btn_go': 'Go',
        'pivot_source': 'Data Source',
        'start_date': 'Start Date',
        'end_date': 'End Date',
        'filename_month_template': 'Month_Data_{month}.xlsx', 
        'export_format': 'Export Format',
        'source_exchange': 'Exchange Rates',
        'source_expenses': 'Regional Expenses',
        'batch_download_zip': 'Download Export File',
        'perm_view_s_display': 'View Summary Display',
        'perm_view_sales_price': 'View Sales Price',
        'perm_view_user_profile': 'Access User Profile',
        'perm_view_system_log': 'View System Logs',
        'perm_delete_own_data': 'Delete Own Data',
        'perm_data_entry_currency': 'Entry-Currency Data',
        'perm_view_display_country': 'View Country Display',
        'perm_view_sales_country': 'View Country Sales',
        'perm_view_history_country': 'View Country History',
        'perm_view_budget_country': 'View Country Budget',
        'perm_view_costs_country': 'View Country Costs',
        # --- Navigation ---
        'nav_dashboard': 'Dashboard',
        'nav_entry': 'Data Entry',
        'nav_display': 'Display View',
        'nav_history': 'History Data',
        'nav_budget': 'Budget Data',
        'nav_costs': 'Costs Detail',
        'nav_price': 'Sales Price',
        'nav_analysis': 'Analysis',
        # 'nav_report': 'Report Gen',  # Removed page
        'nav_log': 'System Log',
        'log_action_login': 'Login',
        'log_action_logout': 'Logout',
        'log_action_data_entry': 'Data Entry',
        'log_action_costs_entry': 'Costs Entry',
        'log_action_exchange_entry': 'Exchange Entry',
        'log_action_expenses_entry': 'Expenses Entry',
        'log_action_sales_entry': 'Sales Entry',
        'log_action_delete': 'Delete',
        'log_action_export': 'Export',
        'log_action_update': 'Update',
        'log_action_view': 'View',
        'log_action_test': 'Test',
        'log_id': 'Log ID',
        # --- Dashboard ---
        'dashboard_header': 'Dashboard & User Center',
        'dashboard_tab_profile': 'Profile',
        'welcome': 'Welcome back, ',
        'role': 'Role',
        'permissions': 'Your Permissions',
        'logout': 'Logout',
        'function_reconmmend': 'Function Recommend',
        'card_entry_title': 'Data Entry',
        'card_entry_desc': 'Input monthly sales data',
        'card_analysis_title': 'Analysis',
        'card_analysis_desc': 'Budget vs Forecast',
        'card_report_title': 'Report Gen',
        'card_report_desc': 'Custom reports & export',
        'system_status': 'System Status',
        'db_connected': 'Database Connected',
        'metric_country': 'Countries',
        'metric_model': 'Models',
        'metric_time': 'Time Periods',
        'dashboard_tab_access': 'Navigation',
        'system_info': 'System Info',
        'login_time': 'Login Time',
        'permission_count': 'Permission Count',
        'database_role': 'Database Role',
        'db_failed': 'Database Connection Failed',
        'db_check_failed': 'Database Check Failed',
        'unknown_user': 'Unknown User',
        'unknown_role': 'Unknown Role',
        'no_permissions': 'No permissions',
        'current_language': 'Current Language',
        'batch_export_title': 'Batch Data Export',
        'batch_export_desc': 'Export multiple data tables at once, support Excel and CSV formats',
        'batch_select_tables': 'Select tables to export',
        'batch_processing': 'Processing batch export...',
        'export_error': 'Error during export',
        'quick_export_options': 'Quick Export Options',
        'export_current_month': 'Export Current Month',
        'export_last_quarter': 'Export Last Quarter',
        'export_all_data': 'Export All Data',
        'enable_date_filter': 'Enable Date Filter',
        'db_size': 'Database Size',
        'db_check_suggestion': 'Please check database connection configuration',
        'generate_batch_export': 'Generate Batch Export',
        'no_data_found': 'No data found matching criteria',
        # --- UI Elements ---
        'filter_title': 'Filter Options',
        'select_time': 'Time Period',
        'select_country': 'Country',
        'select_model': 'Model',
        'select_view': 'Select View',
        'btn_query': 'Query Data',
        'status_querying': 'Querying...',
        'db_check_connection': 'Please check database connection and table names',
        'download_month_data': 'Month_Data_{current_month}.xlsx',
        'download_quarter_data_file': 'Quarter_Data_{start_date}_to_{end_date}.xlsx',
        'header_preview': 'Data Preview',
        'header_stats': 'Summary Statistics',
        'msg_found_records': 'Found {count} records',
        'msg_no_data': 'No data found matching criteria',
        'msg_current_region': 'Current Region: **{region}** (Local Data Only)',
        'msg_view_all_region': 'You can view data for all countries',
        'msg_no_views': 'No display views available for your role',
        'tip_query': "Select view options and click 'Query Data' button",
        'convert_currency': 'Currency Conversion',
        'target_currency': 'Target Currency',
        'comprehensive_data': 'Comprehensive Data Statistics',
        'stat_failed': 'Failed to get statistics',
        'data_tables': 'data tables',
        'records': 'records',
        'preparing_month_data': 'Preparing current month data...',
        'month_data_stats': 'Current Month Statistics:',
        'download_month_excel': 'Download Month Data (Excel)',
        'no_month_data': 'No data for current month',
        'export_month_failed': 'Failed to export month data',
        'preparing_quarter_data': 'Preparing quarter data...',
        'quarter_data_stats': 'Quarter Data Statistics',
        'download_quarter_data': 'Download Quarter Data',
        'no_quarter_data': 'No data for this quarter',
        'export_quarter_failed': 'Failed to export quarter data',
        'preparing_all_data': 'Preparing all data...',
        'all_data_stats': 'Database All Data Statistics',
        'all_data_warning': 'Note: Large data volume, export may take longer',
        'no_data_in_db': 'No data in database',
        'get_stats_failed': 'Failed to get statistics',
        # --- Data Entry ---
        'costs_entry_title': 'Costs Data Entry',
        'exchange_entry_title': 'Exchange Rate Entry',
        'expenses_entry_title': 'Regional Expenses Entry',
        'model_entry_title': 'Model Data Entry',
        'country_entry_title': 'Country Data Entry',
        'sales_entry_title': 'Sales Data Entry',
        'history_entry_title': 'History Data Entry',
        'budget_entry_title': 'Budget Data Entry',

        'delete_title': 'Delete Data',
        'ph_cost_id': 'Cost Record ID',
        'ph_exchange_rate': 'Exchange Rate',
        'exchange_hint': 'Enter monthly exchange rate (USD to CNY)',
        'expenses_hint': 'Enter regional fixed expenses (Unit: CNY/month)',
        'expenses_detail_title': 'Expenses Details',

        'ph_marketing_expenses': 'Marketing Expenses',
        'ph_labor_cost': 'Labor Cost',
        'ph_other_variable': 'Other Variable Expenses',
        'ph_other_fixed': 'Other Fixed Expenses',

        'ph_series': 'Product Series',
        'ph_model_label': 'Product Label',
        'ph_market': 'Market Region',
        'current_region': 'Current Region',
        'region_hint': 'Only for entering local region data',
        'ph_currency': 'Currency',
        'ph_record_id': 'Record ID',
        'entry_page_title': 'Data Entry Management',
        'entry_select_type': 'Select Entry Type',
        'entry_opt_costs': 'Costs Data',
        'entry_opt_exchange': 'Exchange Rate',
        'entry_opt_expenses': 'Expenses Data',
        'entry_opt_model': 'Model Data',
        'entry_opt_country': 'Country Data',
        'entry_opt_sales': 'Sales Data',
        'entry_opt_batch': 'Batch Sales',
        'entry_opt_history': 'History Data',
        'entry_opt_budget': 'Budget Data',
        'msg_no_entry_opt': 'No entry options available',
        'tab_add_update': 'Add / Update',
        'tab_delete': 'Delete',
        'btn_save': 'Submit',
        'btn_delete': 'Delete',
        'ph_time': 'Time (YYYY-MM)',
        'ph_sales': 'Volume',
        'ph_price': 'Price',
        'ph_cost': 'Unit Cost',
        'ph_model': 'Model',
        'ph_country': 'Country',
        'label_currency': 'Currency',
        'msg_save_success': 'Saved Successfully!',
        'msg_del_success': 'Deleted Successfully!',
        
        # --- Batch ---
        'batch_title': 'Batch Sales Entry',
        'batch_hint': 'Tip: Copy data from Excel (no headers) and paste into the top-left cell.',
        'batch_btn_save': 'Batch Save',
        'batch_msg_empty': 'Table is empty',
        'batch_msg_success': 'Batch Import: {success} success, {fail} failed',
        'batch_msg_fail_all': 'All records failed to save',
        
        # --- Metrics ---
        'metric_records': 'Total Records',
        'metric_total_sales': 'Total Sales',
        'metric_total_revenue': 'Total Revenue',
        'metric_total_profit': 'Total Net Income',
        'metric_avg_cost': 'Average Cost',
        'metric_cost_range': 'Cost Range',
        'metric_avg_price': 'Average Price',
        'metric_main_currency': 'Main Currency',
        'msg_no_time_data': 'No time period data found',
        'msg_select_time_period': 'Please select time period',
        'msg_no_data_for_time': 'No data found for selected time periods',
        'msg_time_breakdown_stats': 'Found {records} time breakdown records, covering {countries} countries',
        'select_time_periods': 'Select Time Periods',
        'tab_revenue_trends': 'Revenue Trends',
        'tab_net_income_trends': 'Net Income Trends',
        'tab_country_heatmap': 'Country Heatmap',
        'chart_revenue_trends': 'Revenue Trends Chart',
        'chart_net_income_by_time': 'Net Income by Time Period',
        'chart_revenue_heatmap': 'Revenue Heatmap',
        'label_time_period': 'Time Period',
        'chart_sales_comparison': 'Sales Comparison Chart',
        'legend_forecast': 'Forecast',
        'legend_budget': 'Budget',
        'msg_no_sales_data': 'No sales data available',
        'msg_no_revenue_data': 'No revenue data available',
        'msg_no_profit_data': 'No profit data available',
        'msg_no_comparison_data': 'No comparison data available',
        'msg_no_country_data': 'No country data available',
        'msg_no_product_data': 'No product data available',
        'unit_revenue': 'Revenue',
        'unit_profit': 'Profit',
        'chart_revenue_by_country': 'Revenue by Country',
        'chart_net_income_by_country': 'Net Income by Country',
        'chart_sales_by_product': 'Sales by Product',
        'chart_revenue_distribution': 'Revenue Distribution',
        'col_sales_diff': 'Sales Difference',
        'col_revenue_diff': 'Revenue Difference',
        'col_gross_profit_diff': 'Gross Profit Difference',
        'col_net_profit_diff': 'Net Profit Difference',
        # --- Export ---
        'header_export': 'Export Data',
        'btn_export_csv': 'Export CSV',
        'btn_export_excel': 'Export Excel',
        
        # --- View Names ---
        'view_display_all': 'Comprehensive Display (All Countries)',
        'view_s_display': 'Summary Display',
        'view_s_model': 'Model Summary Display',
        'view_s_country': 'Country Summary Display',
        'view_display_india': 'ğŸ‡®ğŸ‡³ Display - India',
        'view_display_pakistan': 'ğŸ‡µğŸ‡° Display - Pakistan',
        'view_display_kenya': 'ğŸ‡°ğŸ‡ª Display - Kenya',
        'view_display_sa': 'ğŸ‡¿ğŸ‡¦ Display - South Africa',
        'view_history': 'Historical Data',
        'view_budget': 'Budget Data',
        'view_costs': 'Cost Data',
        'view_price': 'Price Data',

        # --- Analysis ---
        'analysis_select_dim': 'Select Analysis Dimension',
        'analysis_opt_comparison': 'Budget vs Forecast',
        'analysis_opt_time': 'Time Trend',
        'analysis_opt_country': 'Country Summary',
        'analysis_opt_product': 'Product Summary',
        'analysis_title_comparison': 'Budget vs Forecast Comparison',
        'analysis_title_time': 'Time Period Trend Analysis',
        'analysis_title_country': 'Regional Summary Analysis',
        'analysis_title_product': 'Product Sales Analysis',
        'tab_sales': 'Sales',
        'tab_revenue': 'Revenue',
        'tab_net_income': 'Net Income',
        
        # --- System Info ---
        'sys_status_cpu': 'CPU Usage',
        'sys_status_ram': 'RAM Usage',
        'sys_status_disk': 'Disk Space',
        'sys_status_uptime': 'Uptime',
        'sys_user_active': 'Active Users',
        'sys_last_update': 'Last Update',
        
        # --- Permissions ---
        'perm_manage_users': 'Manage Users',
        'perm_view_audit': 'View Audit',
        'perm_edit_settings': 'Edit Settings',
        'perm_data_entry': 'Data Entry',
        'perm_view_display': 'Display View',
        'perm_analyze': 'Analysis',
        'perm_export': 'Report Export',
        'perm_view_history': 'View History',
        'perm_view_budget': 'View Budget',
        'perm_view_costs': 'View Costs',
        'perm_view_price': 'View Price',
        'perm_edit_price': 'Edit Price',
        'perm_view_log': 'View Logs',
        'perm_view_system_log': 'View System Logs',
        
        # --- Data Entry Sub-permissions ---
        'perm_data_entry_sales': 'Entry-Sales Data',
        'perm_data_entry_costs': 'Entry-Costs Data',
        'perm_data_entry_expenses': 'Entry-Expenses Data',
        'perm_data_entry_exchange': 'Entry-Exchange Rate',
        'perm_data_entry_model': 'Entry-Model Data',
        'perm_data_entry_country': 'Entry-Country Data',
        
        # --- Report New Features (Removed) ---
        'pivot_drag_drop': 'Drag & Drop to create Pivot Table',
        'pivot_download': 'Download Pivot (Excel)',
        'batch_processing': 'Processing...',
        'batch_complete': 'Archive Complete! {count} files.',
        'batch_download_zip': 'Download ZIP Archive',
        'batch_select_hint': 'Please select at least one table',
        'source_display': 'Display View',
        'source_history': 'History Data',
        'source_budget': 'Budget Data',
        'source_costs': 'Costs Detail',
        
        # --- Report (Removed but keep translations) ---
        'report_page_title': 'Advanced Data Export Center',
        'report_page_desc': 'Custom report, pivot tables, and batch download.',
        'report_tab_custom': 'Detail Report',
        'report_tab_pivot': 'Pivot Table',
        'report_tab_batch': 'Batch Archive',
        'report_cfg_source': '1. Configure Source',
        'report_select_source': 'Select Data Source Table',
        'report_cfg_cols': '2. Filter & Columns',
        'report_sel_cols': 'Select Columns',
        'report_preview_title': 'Data Preview',
        'report_batch_desc': 'One-click download of all core tables (Display, History, Budget, Costs), automatically zipped.',
        'report_sel_tables': 'Select Tables to Archive',
        'report_btn_batch': 'Start Batch Generation',
        'report_success_batch': 'Packaging Complete! Contains {count} files.',
        'report_btn_dl_batch': 'Download ZIP Archive',
        'pivot_cfg_rows': 'Rows',
        'pivot_cfg_cols': 'Columns',
        'pivot_cfg_vals': 'Values',
        'pivot_cfg_func': 'Agg Function',
        
        # --- Login ---
        'login_page_title': 'Sales Data Analysis System',
        'subtitle': 'Data-driven business intelligence platform',
        'login_title': 'User Login',
        'username_ph': 'e.g., Manager',
        'password_ph': 'Enter password',
        'login_btn': 'Login',
        'login_success': 'Login successful!',
        'login_failed': 'Authentication failed',
        'test_accounts': 'Test Account Information',
        'test_table': """
| Role | Username | Name | Password |
|---|---|---|---|
| **Manager** | `manager_user` | Manager Zhang | `123` |
| **Finance** | `fbp_user` | Finance Li | `123` |
| **India** | `sales_india` | Rahul | `123` |
| **Pakistan** | `sales_pakistan` | Ahmed | `123` |
| **S.Africa** | `sales_south_africa` | Botha | `123` |
| **Kenya** | `sales_kenya` | Kipchoge | `123` |
""",
        
        # --- Logs ---
        'log_search_placeholder': 'Search User, Role, Action...',
        'log_filter_action': 'Filter Action Type',
        'log_refresh': 'Refresh Logs',
        'log_total': 'Total Logs',
        'log_active_users': 'Active Users',
        'log_latest': 'Latest Record',
        'log_frequent_action': 'Frequent Action',
        'log_time': 'Time',
        'log_username': 'User ID',
        'log_role': 'Role',
        'log_action': 'Action',
        'log_details': 'Details',
        'log_export_csv': 'Export Logs (CSV)',
        'log_export_excel': 'Export Logs (Excel)',
        'log_analysis': 'Log Analysis',
        'log_dist_action': 'Action Distribution',
        'log_dist_user': 'User Activity',
        
        # --- New System Log Translations ---
        'log_manager_filters': 'Manager Filter Options',
        'log_filter_user': 'Filter by User',
        'log_filter_role': 'Filter by Role',
        'log_time_range': 'Time Range',
        'log_start_date': 'Start Date',
        'log_end_date': 'End Date',
        'log_records': 'Log Records',
        'log_showing': 'Showing',
        'log_of_total': 'records (Total',
        'log_time_trend': 'Log Time Trend',
        'log_export': 'Export Logs',
        'log_export_csv_help': 'Download complete logs in CSV format',
        'log_export_excel_help': 'Download complete logs in Excel format',
        'log_all_users': 'All Users',
        'log_all_roles': 'All Roles'
    }
}

def init_language():
    """åˆå§‹åŒ–è¯­è¨€çŠ¶æ€"""
    if 'language' not in st.session_state:
        st.session_state.language = 'zh'

def get_text(key, **kwargs):
    """
    è·å–å½“å‰è¯­è¨€çš„æ–‡æœ¬ï¼Œæ”¯æŒæ ¼å¼åŒ–å‚æ•°
    """
    lang = st.session_state.get('language', 'zh')
    text = TRANSLATIONS.get(lang, {}).get(key, TRANSLATIONS.get('zh', {}).get(key, key))
    if kwargs and isinstance(text, str):
        try:
            return text.format(**kwargs)
        except:
            return text
    return text

def show_sidebar_with_nav():
    """ç»Ÿä¸€ä¾§è¾¹æ  - å·²æ›´æ–°ï¼Œç§»é™¤æŠ¥è¡¨é¡µé¢"""
    init_language()
    
    st.markdown("""
        <style>
        [data-testid="stSidebarNav"] {display: none !important;}
        </style>
        """, unsafe_allow_html=True)
    
    with st.sidebar:
        st.caption(get_text('app_title'))
        
        # å¯¼èˆªèœå• - å·²ç§»é™¤æŠ¥è¡¨é¡µé¢
        st.page_link("pages/1_Dashboard.py", label=get_text('nav_dashboard'))
        st.page_link("pages/2_data_entry.py", label=get_text('nav_entry'))
        st.page_link("pages/3_display_view.py", label=get_text('nav_display'))
        st.page_link("pages/4_history.py", label=get_text('nav_history'))
        st.page_link("pages/5_budget.py", label=get_text('nav_budget'))
        st.page_link("pages/6_costs.py", label=get_text('nav_costs'))
        st.page_link("pages/7_sales_price.py", label=get_text('nav_price'))
        st.page_link("pages/8_analysis.py", label=get_text('nav_analysis'))
        # æŠ¥è¡¨é¡µé¢å·²åˆ é™¤ï¼Œä¸å†æ˜¾ç¤ºé“¾æ¥
        # st.page_link("pages/9_report.py", label=get_text('nav_report'))  # REMOVED
        
        # ç³»ç»Ÿæ—¥å¿—åªå¯¹ç»ç†æ˜¾ç¤º
        # if st.session_state.get('role') == 'Manager':
        #     st.page_link("pages/10_System_Log.py", label=get_text('nav_log'))
        if 'view_system_log' in st.session_state.get('permissions', []):
            st.page_link("pages/10_System_Log.py", label=get_text('nav_log'))
        st.markdown("---")

        current_idx = 0 if st.session_state.language == 'zh' else 1
        lang = st.selectbox(
            get_text('sidebar_lang'),
            options=["ğŸ‡¨ğŸ‡³ ä¸­æ–‡", "ğŸ‡ºğŸ‡¸ English"],
            index=current_idx,
            key="sidebar_lang_select"
        )
        
        new_lang = 'zh' if "ä¸­æ–‡" in lang else 'en'
        if st.session_state.language != new_lang:
            st.session_state.language = new_lang
            st.rerun()